<script>
  document.getElementById("signupForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const gender = document.getElementById("gender").value;
    const is_creator = document.getElementById("is_creator").checked;

    const messageDiv = document.getElementById("message");
    messageDiv.textContent = "Please wait...";

    const payload = {
      email,
      password,
      gender,
      is_creator
    };

    console.log("Sending payload:", payload);

    try {
      const res = await fetch("https://quen.onrender.com/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const data = await res.json();
      console.log("Response:", data);

      if (res.ok) {
        messageDiv.style.color = "lightgreen";
        messageDiv.textContent = data.message || "Signup successful!";
      } else {
        messageDiv.style.color = "red";
        messageDiv.textContent = data.error || "Signup failed.";
      }
    } catch (err) {
      console.error("Fetch error:", err);
      messageDiv.style.color = "red";
      messageDiv.textContent = "Something went wrong.";
    }
  });
</script>
